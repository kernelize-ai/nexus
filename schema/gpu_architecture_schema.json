{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Device Architecture Schema",
  "description": "Schema for describing device architecture properties and capabilities",
  "type": "object",
  "required": ["Name", "Vendor", "Architecture", "ReleaseYear"],
  "properties": {
    "Name": {
      "type": "string",
      "description": "Architecture name (e.g., RDNA 3, Ampere, Ada Lovelace)"
    },
    "Vendor": {
      "type": "string",
      "description": "Manufacturer",
      "enum": ["AMD", "NVIDIA", "Intel", "ARM", "Qualcomm", "Apple", "Other"]
    },
    "Architecture": {
      "type": "string",
      "description": "Architecture target (e.g., gfx942, sm_80)"
    },
    "ReleaseYear": {
      "type": "integer",
      "description": "Year the architecture was first released",
      "minimum": 1990
    },
    "FabricationProcess": {
      "type": "object",
      "description": "Details about the fabrication process",
      "required": ["ProcessNode"],
      "properties": {
        "ProcessNode": {
          "type": "number",
          "description": "Manufacturing process node size in nanometers"
        },
        "Manufacturer": {
          "type": "string",
          "description": "Semiconductor foundry (e.g., TSMC, Samsung, GlobalFoundries)"
        },
        "Technology": {
          "type": "string",
          "description": "Process technology name (e.g., N5, 7LPP)"
        }
      }
    },
    "CoreSubsystem": {
      "type": "object",
      "description": "Information about the Chip Compute Hierarchy",
      "properties": {
        "Name": {
          "type": "string",
          "description": "Vendor-specific name for compute units (e.g., CU, SM, Xe-core)"
        },
        "SubUnits": {
          "type": "array",
          "description": "Sub-units within each compute unit (e.g. chip, CU, SIMD, Tensor Core",
          "items": {
            "type": "object",
            "required": ["Type", "Count", "Size"],
            "properties": {
              "Type": {
                "type": "string",
                "description": "Type name of the sub-unit (e.g., SIMD, Tensor Core)"
              },
              "Count": {
                "type": "integer",
                "description": "Number of these units per parent unit"
              },
              "Size": {
                "type": "integer",
                "description": "Number of sub-units inside this unit (e.g. threads)"
              },
              "Description": {
                "type": "string",
                "description": "Description of the sub-unit's function"
              },
              "Memory": {
                "type": "array",
                "items": {
                  "type": "string",
                  "description": "Specify memory type embedded in the Core (Lookup in MemorySubsystem)"
                }
              },
              "SubunitType": {
                "type": "string",
                "description": "Name of the sub-unit (lookup in this list)"
              }
            }
          }
        }
      }
    },
    "MemorySubsystem": {
      "type": "object",
      "description": "Memory architecture details",
      "properties": {
        "SupportedMemoryTypes": {
          "type": "array",
          "description": "Types of memory supported",
          "items": {
            "type": "string",
            "enum": ["GDDR6", "GDDR6X", "HBM2", "HBM2e", "HBM3", "DDR4", "DDR5", "LPDDR5", "Other"]
          }
        },
        "MemoryTypes": {
          "type": "array",
          "description": "Details about the memory level, including cache, scratch memory and register files",
          "items": {
            "type": "object",
            "properties": {
              "Type": {
                "type": "string",
                "description": "Memory Type (e.g., L1, L2, Infinity Cache, vector register file, scalar register file, shared memory)"
              },
              "Size": {
                "type": "integer",
                "description": "Size per unit in KB"
              },
              "BankCount": {
                "type": "integer",
                "description": "Number of Banks per unit"
              },
              "MaxMemoryBandwidth": {
                "type": "number",
                "description": "Maximum theoretical memory bandwidth in GB/s"
              },
              "maxBusWidth": {
                "type": "integer",
                "description": "Maximum memory bus width in bits"
              },
              "description": {
                "type": "string",
                "description": "Description of the cache's function"
              }
            }
          }
        }
      }
    },
    "KernelModel": {
      "type": "object",
      "description": "Information about supported shader models",
      "properties": {
        "LLVMTarget": {
          "type": "string",
          "description": "LLVM Target architecture"
        },
        "LLVMTriple": {
          "type": "string",
          "description": "LLVM Target triple"
        },
        "LLVMFeatures": {
          "type": "array",
          "description": "LLVM Target triple",
          "items": {
            "type": "object",
            "required": ["Name", "Description"],
            "properties": {
              "Name": {
                "type": "string",
                "description": "Name of the LLVM feature"
              },
              "Description": {
                "type": "string",
                "description": "Description of LLVM feature"
              }
            }
          }
          }
      },
      "SubUnits": {
        "type": "array",
        "description": "Subunits within each compute unit",
        "items": {
          "type": "object",
          "required": ["Type", "Version"],
          "properties": {
            "Type": {
              "type": "string",
              "description": "Name of the KernelModel (e.g., metal, opencl, vulkan, )"
            },
            "Version": {
              "type": "string",
              "description": "Version of the Kernel (e.g., 1.2)"
            }
          }
        }
      }
    },
    "SpecializedHardware": {
      "type": "object",
      "description": "Specialized processing units",
      "properties": {
        "RayTracingAccelerators": {
          "type": "object",
          "description": "Ray tracing hardware details",
          "properties": {
            "Present": {
              "type": "boolean",
              "description": "Whether the architecture has dedicated ray tracing hardware"
            },
            "Name": {
              "type": "string",
              "description": "Vendor-specific name for the RT units"
            },
            "Count": {
              "type": "integer",
              "description": "Number of RT units per compute unit"
            },
            "Performance": {
              "type": "object",
              "description": "Performance metrics",
              "properties": {
                "RaysPerSecond": {
                  "type": "number",
                  "description": "Ray throughput in giga-rays per second"
                }
              }
            }
          }
        },
        "AiAccelerators": {
          "type": "object",
          "description": "AI/ML acceleration hardware",
          "properties": {
            "Present": {
              "type": "boolean",
              "description": "Whether the architecture has dedicated AI hardware"
            },
            "Name": {
              "type": "string",
              "description": "Vendor-specific name for AI units (e.g., Tensor Core, Matrix Engine)"
            },
            "Count": {
              "type": "integer",
              "description": "Number of AI units per compute unit"
            },
            "SupportedPrecisions": {
              "type": "array",
              "description": "Supported numerical precisions",
              "items": {
                "type": "string",
                "enum": ["FP32", "FP16", "BF16", "INT8", "INT4", "Other"]
              }
            },
            "Performance": {
              "type": "object",
              "description": "Performance metrics",
              "properties": {
                "fp16TopsPerGPU": {
                  "type": "number",
                  "description": "Maximum FP16 operations per second in teraops"
                },
                "int8TopsPerGPU": {
                  "type": "number",
                  "description": "Maximum INT8 operations per second in teraops"
                }
              }
            }
          }
        },
        "videoCodecs": {
          "type": "object",
          "description": "Video encode/decode capabilities",
          "properties": {
            "encoders": {
              "type": "array",
              "description": "Supported video encoding formats",
              "items": {
                "type": "object",
                "properties": {
                  "codec": {
                    "type": "string",
                    "enum": ["H.264", "H.265/HEVC", "AV1", "VP9", "Other"]
                  },
                  "maxResolution": {
                    "type": "string",
                    "description": "Maximum supported resolution (e.g., 4K, 8K)"
                  },
                  "maxBitrate": {
                    "type": "integer",
                    "description": "Maximum bitrate in Mbps"
                  },
                  "maxFPS": {
                    "type": "integer",
                    "description": "Maximum frames per second"
                  }
                }
              }
            },
            "decoders": {
              "type": "array",
              "description": "Supported video decoding formats",
              "items": {
                "type": "object",
                "properties": {
                  "codec": {
                    "type": "string",
                    "enum": ["H.264", "H.265/HEVC", "AV1", "VP9", "Other"]
                  },
                  "maxResolution": {
                    "type": "string",
                    "description": "Maximum supported resolution (e.g., 4K, 8K)"
                  },
                  "maxBitrate": {
                    "type": "integer",
                    "description": "Maximum bitrate in Mbps"
                  },
                  "maxFPS": {
                    "type": "integer",
                    "description": "Maximum frames per second"
                  }
                }
              }
            }
          }
        }
      }
    },
    "PowerEfficiency": {
      "type": "object",
      "description": "Power efficiency characteristics",
      "properties": {
        "BaseClock": {
          "type": "integer",
          "description": "Maximum thermal design power in watts"
        },
        "BoostClock": {
          "type": "integer",
          "description": "Maximum thermal design power in watts"
        },
        "MaxTDP": {
          "type": "integer",
          "description": "Maximum thermal design power in watts"
        },
        "PowerStates": {
          "type": "array",
          "description": "Supported power states",
          "items": {
            "type": "object",
            "properties": {
              "Name": {
                "type": "string",
                "description": "Name of the power state"
              },
              "Description": {
                "type": "string",
                "description": "Description of the power state"
              }
            }
          }
        },
        "ClockGating": {
          "type": "boolean",
          "description": "Support for clock gating techniques"
        },
        "DynamicVoltageFrequencyScaling": {
          "type": "boolean",
          "description": "Support for DVFS"
        }
      }
    },
    "PciExpress": {
      "type": "object",
      "description": "PCIe connectivity details",
      "properties": {
        "Version": {
          "type": "string",
          "description": "PCIe version (e.g., 4.0, 5.0)"
        },
        "Lanes": {
          "type": "integer",
          "description": "Maximum PCIe lanes"
        },
        "Bandwidth": {
          "type": "number",
          "description": "Maximum bidirectional bandwidth in GB/s"
        }
      }
    },
    "MultiGpuSupport": {
      "type": "object",
      "description": "Multi-GPU capabilities",
      "properties": {
        "Technologies": {
          "type": "array",
          "description": "Supported multi-GPU technologies",
          "items": {
            "type": "string",
            "enum": ["CrossFire", "SLI", "NVLink", "Infinity Fabric", "None", "Other"]
          }
        },
        "MaxGpus": {
          "type": "integer",
          "description": "Maximum number of supported GPUs in a multi-GPU configuration"
        },
        "InterconnectBandwidth": {
          "type": "number",
          "description": "GPU-to-GPU interconnect bandwidth in GB/s"
        }
      }
    }
  }
}
